(this["webpackJsonpts-demop"]=this["webpackJsonpts-demop"]||[]).push([[0],{159:function(e,n,o){},163:function(e,n,o){},164:function(e,n,o){},168:function(e,n,o){},169:function(e,n,o){"use strict";o.r(n);var t=o(0),c=o(15),r=o.n(c),i=(o(159),o(216)),a=o(6),s=o(20),d=o(61),l=Object(d.b)({name:"productos",initialState:{procesando:!1,allProductos:[]},reducers:{PROCESANDO:function(e){e.procesando=!0},SET_PRODUCTOS:function(e,n){e.procesando=!1,e.allProductos=n.payload},ADD_PRODUCTO:function(e,n){e.procesando=!1,e.allProductos=[].concat(Object(s.a)(e.allProductos),[n.payload])},EDIT_PRODUCTO:function(e,n){e.procesando=!1,e.allProductos=e.allProductos.map((function(e){return e.id===n.payload.id?n.payload:e}))},REMOVE_PRODUCTO:function(e,n){e.procesando=!1,e.allProductos=e.allProductos.filter((function(e){return e.id!==n.payload.id}))}}}),u=l.actions,j=u.PROCESANDO,h=u.SET_PRODUCTOS,O=u.ADD_PRODUCTO,b=u.EDIT_PRODUCTO,f=u.REMOVE_PRODUCTO,m=l.reducer,p=Object(d.b)({name:"snackbar",initialState:{message:"",showMessage:!1},reducers:{SUCCESS:function(e,n){e.showMessage=!0,e.message=n.payload,e.severity="success"},ERROR:function(e,n){e.showMessage=!0,e.message=n.payload,e.severity="error"},CLEAR:function(e){e.message="",e.showMessage=!1,e.severity=void 0}}}),v=p.actions,x=v.SUCCESS,C=v.ERROR,E=v.CLEAR,S=p.reducer;function g(e){if(!e.ok)throw Error(e.status+"-"+e.statusText);return e}var P=o(72),y=function(){return Object(P.b)()},w=P.c,D=(o(163),o(121)),R=o(179),T=o(214),N=o(66),_=o(124),k=o.n(_),U=o(123),A=o.n(U),M=o(57),W=o(218),V=o(212),G=o(213),I=o(32),J=o(99),L=o(215),B=(o(164),o(10));var H=function(e){var n,o,t,c,r;return Object(B.jsxs)(W.a,{open:e.open,onClose:e.onCancelar,maxWidth:!1,children:[Object(B.jsx)(V.a,{id:"form-dialog-title",children:"Producto"}),Object(B.jsx)(G.a,{children:Object(B.jsx)(I.c,{initialValues:{id:null===(n=e.model)||void 0===n?void 0:n.id,nombre:null!==(o=null===(t=e.model)||void 0===t?void 0:t.nombre)&&void 0!==o?o:"",descripcion:null!==(c=null===(r=e.model)||void 0===r?void 0:r.descripcion)&&void 0!==c?c:""},validate:function(e){var n={};return e.nombre.length<3&&(n.nombre="Por favor ingrese un nombre valido"),n},onSubmit:function(n){e.onGuardar(n)},children:function(n){var o=n.isSubmitting,t=n.submitForm;return Object(B.jsxs)(I.b,{className:"formulario column",children:[Object(B.jsx)(L.a,{margin:1,children:Object(B.jsx)(I.a,{component:J.a,type:"text",variant:"outlined",fullWidth:!0,label:"Nombre",name:"nombre",required:!0})}),Object(B.jsx)(L.a,{margin:1,children:Object(B.jsx)(I.a,{component:J.a,type:"text",variant:"outlined",fullWidth:!0,label:"Descripcion",name:"descripcion",multiline:!0,rows:4})}),Object(B.jsxs)(L.a,{className:"row-end",children:[Object(B.jsx)(M.a,{onClick:e.onCancelar,color:"primary",children:"Cancelar"}),Object(B.jsx)(M.a,{onClick:t,variant:"contained",color:"primary",disabled:o,children:"Guardar"})]})]})}})})]})},F=(o(63),o(64),Producto);function K(e,n){return function(o){return Object(B.jsxs)("article",{children:[Object(B.jsx)("strong",{children:Object(B.jsx)(N.a,{onClick:function(){return e(o.row)},children:Object(B.jsx)(A.a,{})})}),Object(B.jsx)("strong",{children:Object(B.jsx)(N.a,{onClick:function(){return n(o.row)},children:Object(B.jsx)(k.a,{})})})]})}}var q=function(){var e=y(),n=Object(t.useState)(!1),o=Object(a.a)(n,2),c=o[0],r=o[1],i=Object(t.useState)(!1),s=Object(a.a)(i,2),d=(s[0],s[1]),l=Object(t.useState)(new F),u=Object(a.a)(l,2),m=u[0],p=u[1],v=w((function(e){return e.productos.allProductos})),E=w((function(e){return e.productos.procesando})),S=[{field:"id",headerName:"ID",width:100,align:"center",headerAlign:"center",disableColumnMenu:!0},{field:"nombre",headerName:"Nombre",width:130},{field:"descripcion",headerName:"Descripcion",width:130,flex:1},{field:"actions",headerName:" ",width:150,renderCell:K((function(e){p(e),r(!0)}),(function(n){e((o=n,function(e){fetch("http://localhost:5000/productos",{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({id:o.id})}).then(g).then((function(e){return e.json()})).then((function(){e(f(o)),e(x("Producto Eliminado"))})).catch((function(n){e(C(n.message)),console.error(n)}))}));var o})),sortable:!1,disableClickEventBubbling:!0}];return Object(t.useEffect)((function(){e(j()),e((function(e){fetch("http://localhost:5000/productos",{method:"GET"}).then(g).then((function(e){return e.json()})).then((function(n){e(h(n))}))}))}),[]),E?Object(B.jsx)(R.a,{}):Object(B.jsxs)("section",{children:[Object(B.jsx)("div",{className:"row-end",children:Object(B.jsx)(M.a,{variant:"outlined",color:"primary",onClick:function(){p(new F),r(!0)},children:"+ Nuevo Producto"})}),Object(B.jsx)(T.a,{className:"card-grid",children:Object(B.jsx)(D.a,{rows:v,columns:S,pageSize:8})}),Object(B.jsx)(H,{open:c,model:m,onCancelar:function(){r(!1)},onGuardar:function(n){var o;n.id?e((o=n,function(e){fetch("http://localhost:5000/productos",{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(o)}).then(g).then((function(e){return e.json()})).then((function(n){e(b(n.producto)),e(x("Cambios Guardados"))}))})):e(function(e){return function(n){fetch("http://localhost:5000/productos",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(g).then((function(e){return e.json()})).then((function(e){n(O(e.producto)),n(x("Producto Creado"))}))}}(n)),r(!1),d(!0)}})]})},z=(o(168),o(102)),$=o(219),Q=function(){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENV;var e=y(),n=w((function(e){return e.snackbar})),o=n.message,t=n.showMessage,c=n.severity;function r(){e(E())}return Object(B.jsx)("main",{children:Object(B.jsxs)(z.a,{className:"papel",children:[Object(B.jsx)("header",{children:Object(B.jsxs)("h1",{children:["ENV:","production"]})}),Object(B.jsx)(q,{}),Object(B.jsx)($.a,{open:t,autoHideDuration:6e3,onClose:r,children:Object(B.jsx)(i.a,{elevation:6,variant:"filled",onClose:r,severity:c,children:o})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=Object(d.a)({reducer:{snackbar:S,productos:m}});r.a.render(Object(B.jsx)(P.a,{store:X,children:Object(B.jsx)(Q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[169,1,2]]]);
//# sourceMappingURL=main.12627684.chunk.js.map