(this["webpackJsonpts-demop"]=this["webpackJsonpts-demop"]||[]).push([[0],{159:function(e,n,t){},163:function(e,n,t){},164:function(e,n,t){},168:function(e,n,t){},169:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(15),r=t.n(c),i=(t(159),t(216)),a=t(7),s=t(20),d=t(61),l=Object(d.b)({name:"productos",initialState:{procesando:!1,allProductos:[]},reducers:{PROCESANDO:function(e){e.procesando=!0},SET_PRODUCTOS:function(e,n){e.procesando=!1,e.allProductos=n.payload},ADD_PRODUCTO:function(e,n){e.procesando=!1,e.allProductos=[].concat(Object(s.a)(e.allProductos),[n.payload])},EDIT_PRODUCTO:function(e,n){e.procesando=!1,e.allProductos=e.allProductos.map((function(e){return e.id===n.payload.id?n.payload:e}))},REMOVE_PRODUCTO:function(e,n){e.procesando=!1,e.allProductos=e.allProductos.filter((function(e){return e.id!==n.payload.id}))}}}),u=l.actions,j=u.PROCESANDO,h=u.SET_PRODUCTOS,b=u.ADD_PRODUCTO,O=u.EDIT_PRODUCTO,f=u.REMOVE_PRODUCTO,p=l.reducer,m=Object(d.b)({name:"snackbar",initialState:{message:"",showMessage:!1},reducers:{SUCCESS:function(e,n){e.showMessage=!0,e.message=n.payload,e.severity="success"},ERROR:function(e,n){e.showMessage=!0,e.message=n.payload,e.severity="error"},CLEAR:function(e){e.message="",e.showMessage=!1,e.severity=void 0}}}),v=m.actions,x=v.SUCCESS,C=v.ERROR,E=v.CLEAR,S=m.reducer;function P(e){if(!e.ok)throw Error(e.status+"-"+e.statusText);return e}var g=t(71),y=function(){return Object(g.b)()},D=g.c,R=(t(163),t(121)),T=t(179),w=t(214),N=t(65),_=t(124),k=t.n(_),U=t(123),A=t.n(U),M=t(57),I=t(218),L=t(212),V=t(213),W=t(32),G=t(99),J=t(215),H=(t(164),t(10));var B=function(e){var n,t,o,c,r;return Object(H.jsxs)(I.a,{open:e.open,onClose:e.onCancelar,maxWidth:!1,children:[Object(H.jsx)(L.a,{id:"form-dialog-title",children:"Producto"}),Object(H.jsx)(V.a,{children:Object(H.jsx)(W.c,{initialValues:{id:null===(n=e.model)||void 0===n?void 0:n.id,nombre:null!==(t=null===(o=e.model)||void 0===o?void 0:o.nombre)&&void 0!==t?t:"",descripcion:null!==(c=null===(r=e.model)||void 0===r?void 0:r.descripcion)&&void 0!==c?c:""},validate:function(e){var n={};return e.nombre.length<3&&(n.nombre="Por favor ingrese un nombre valido"),n},onSubmit:function(n){e.onGuardar(n)},children:function(n){var t=n.isSubmitting,o=n.submitForm;return Object(H.jsxs)(W.b,{className:"formulario column",children:[Object(H.jsx)(J.a,{margin:1,children:Object(H.jsx)(W.a,{component:G.a,type:"text",variant:"outlined",fullWidth:!0,label:"Nombre",name:"nombre",required:!0})}),Object(H.jsx)(J.a,{margin:1,children:Object(H.jsx)(W.a,{component:G.a,type:"text",variant:"outlined",fullWidth:!0,label:"Descripcion",name:"descripcion",multiline:!0,rows:4})}),Object(H.jsxs)(J.a,{className:"row-end",children:[Object(H.jsx)(M.a,{onClick:e.onCancelar,color:"primary",children:"Cancelar"}),Object(H.jsx)(M.a,{onClick:o,variant:"contained",color:"primary",disabled:t,children:"Guardar"})]})]})}})})]})},F=t(63),K=function e(n){Object(F.a)(this,e),this.productoId=void 0,this.nombre=void 0,this.descripcion=void 0,this.id=void 0,Object.assign(this,n)};function q(e,n){return function(t){return Object(H.jsxs)("article",{children:[Object(H.jsx)("strong",{children:Object(H.jsx)(N.a,{onClick:function(){return e(t.row)},children:Object(H.jsx)(A.a,{})})}),Object(H.jsx)("strong",{children:Object(H.jsx)(N.a,{onClick:function(){return n(t.row)},children:Object(H.jsx)(k.a,{})})})]})}}var z=function(){var e=y(),n=Object(o.useState)(!1),t=Object(a.a)(n,2),c=t[0],r=t[1],i=new K;console.log("producto1");var s=Object(o.useState)(i),d=Object(a.a)(s,2),l=d[0],u=d[1],p=D((function(e){return e.productos.allProductos})),m=D((function(e){return e.productos.procesando})),v=[{field:"id",headerName:"ID",width:100,align:"center",headerAlign:"center",disableColumnMenu:!0},{field:"nombre",headerName:"Nombre",width:130},{field:"descripcion",headerName:"Descripcion",width:130,flex:1},{field:"actions",headerName:" ",width:150,renderCell:q((function(e){u(e),r(!0)}),(function(n){e((t=n,function(e){fetch("http://".concat(Y(),"/productos"),{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({id:t.id})}).then(P).then((function(e){return e.json()})).then((function(){e(f(t)),e(x("Producto Eliminado"))})).catch((function(n){e(C(n.message)),console.error(n)}))}));var t})),sortable:!1,disableClickEventBubbling:!0}];return Object(o.useEffect)((function(){e(j()),e((function(e){fetch("http://".concat(Y(),"/productos"),{method:"GET"}).then(P).then((function(e){return e.json()})).then((function(n){e(h(n))}))}))}),[]),m?Object(H.jsx)(T.a,{}):Object(H.jsxs)("section",{children:[Object(H.jsx)("div",{className:"row-end",children:Object(H.jsx)(M.a,{variant:"outlined",color:"primary",onClick:function(){u(new K),r(!0)},children:"+ Nuevo Producto"})}),Object(H.jsx)(w.a,{className:"card-grid",children:Object(H.jsx)(R.a,{rows:p,columns:v,pageSize:8})}),Object(H.jsx)(B,{open:c,model:l,onCancelar:function(){r(!1)},onGuardar:function(n){var t;n.id?e((t=n,function(e){fetch("http://".concat(Y(),"/productos"),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(P).then((function(e){return e.json()})).then((function(n){e(O(n.producto)),e(x("Cambios Guardados"))}))})):e(function(e){return function(n){fetch("http://".concat(Y(),"/productos"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(P).then((function(e){return e.json()})).then((function(e){n(b(e.producto)),n(x("Producto Creado"))}))}}(n)),r(!1)}})]})},Q=(t(168),t(102)),X=t(219),Y=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ENV;return"development"===(null===e||void 0===e?void 0:e.toLowerCase())?"localhost:5000":"moxtechdemo.sa-east-1.elasticbeanstalk.com"},Z=function(){var e=y(),n=D((function(e){return e.snackbar})),t=n.message,o=n.showMessage,c=n.severity;function r(){e(E())}return Object(H.jsx)("main",{children:Object(H.jsxs)(Q.a,{className:"papel",children:[Object(H.jsx)("header",{children:Object(H.jsxs)("h1",{children:["ENV:","production"]})}),Object(H.jsx)(z,{}),Object(H.jsx)(X.a,{open:o,autoHideDuration:6e3,onClose:r,children:Object(H.jsx)(i.a,{elevation:6,variant:"filled",onClose:r,severity:c,children:t})})]})})},$=Object(d.a)({reducer:{snackbar:S,productos:p}});r.a.render(Object(H.jsx)(g.a,{store:$,children:Object(H.jsx)(Z,{})}),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.9f162873.chunk.js.map